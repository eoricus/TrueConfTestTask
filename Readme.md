# Библиотека для кружочков, и не только

Это библиотека, представляющая возможности создания и работы с примитивными геометрическими фигурами: [кругом](#круг), [прямоугольником](#прямоугольник) и [треугольником](#треугольник).

Каждая из фигур представляет из себя дочерний класс Shape,, реализующий уникальный для своей сущности функционал или предоставляющий уникальные свойства (длину окружности для круга, или углы для треугольника). Класс shape наследуется от EventEmitter, тем самым позволяя отслеживать события, происходящие с фигурами (например — измение размера).

[Добавление новых фигур](#добавление-новых-фигур) в коде происходит за счет разработки нового интерфейса, специфичного для каждой фигуры, и передачи этого интерфейса в Shape. Таким образом, для каждой фигуры нужно реализовывать исключительно уникальные для них методы и свойства.

## Установка библиотеки

Для установки библиотеки необходимо установить репозитории в ваш рабочий директорий.

```bash
git clone https://github.com/eoricus/TrueConfTestTask
```

Затем необходимо импортировать нужные библиотеки из директории:

```typescript
import { Circle, Rect, Triangle } from "./trueConfTestTask";

// OR

const { Circle, Rect, Triangle } = require("./trueConfTestTask");
```

## Работа с библиотекой

Родительский класс Shape реализует методы для базового взаимодействия с фигурами: изменение размера _(resize)_, растягивание _(stretch)_, растягивание на коэффициент _(stretchByRatio)_.

### Круг

```typescript
const circle = new Circle({ radius: 5 });

// Изменение размера фигуры
console.log("Площадь круга, до изменений: " + circle.area);
circle.resize({ radius: 7 });
console.log("Площадь круга, после изменений: " + circle.area);

// ВЫВОД:
// Площадь круга, до изменений: 78.53981633974483
// Площадь круга, после изменений: 153.93804002589985
```

### Прямоугольник

Также, класс Shape является расширением класса EventEmitter, а потому для всех объектов фигур работают eventListener-ы по классической схеме.

```typescript
const rect = new Rect({ width: 4, height: 6 });

/**
 * Каждый раз, когда будут изменяться размеры фигуры, будет выводится
 * информация о способе изменения размера, а также новые свойства прямоугольника.
 */

rect.on("sizeChange", (details) => {
  console.log(
    details.isStretched
      ? "Прямоугольник был растянут"
      : "Размеры прямоугольника были изменены"
  );
  console.log(
    "Теперь, прямоугольник — " +
      (rect.isSquare()
        ? "квадрат"
        : rect.isHorizontal()
        ? "горизонтальный"
        : "вертикальный")
  );
});

rect.stretch({ width: 2 });
rect.resize({ width: 10, height: 2 });

// ВЫВОД:
// Размеры прямоугольника были изменены
// Теперь, прямоугольник — квадрат
// Размеры прямоугольника были изменены
// Теперь, прямоугольник — горизонтальный
```

### Треугольник

В классах фигур есть статические методы, для создания новых фигур какими-то особыми способами. Например, в случае с треугольниками — можно задать равносторонний или равнобедренный треугольник, или же задать треугольник по двум сторонам и углу.

```typescript
const triangles = [
  new Triangle({ a: 2, b: 2, c: 1 }),
  Triangle.createFromTwoSidesAndAngle(3, 4, 90),
  Triangle.createEquilateral(10),
  Triangle.createIsosceles(2, 1),
];

triangles.forEach((tr, i) => {
  console.log(
    `\nФакты о треугольнике №${i + 1}. Стороны: ` + tr.sideValues.join(", ")
  );
  if (tr.isEquilateral()) console.log("Это равносторонний треугольник!");
  if (tr.isIsosceles()) console.log("Это равнобедренный треугольник!");
  if (tr.isRight()) console.log("Это прямоугольный треугольник!");
  if (tr.isEgyptian()) console.log("Это Египетский треугольник!");
});

// ВЫВОД
// Факты о треугольнике №1. Стороны: 1, 2, 2
// Это равнобедренный треугольник!

// Факты о треугольнике №2. Стороны: 3, 4, 5.0059707498962895

// Факты о треугольнике №3. Стороны: 10, 10, 10
// Это равносторонний треугольник!
// Это равнобедренный треугольник!

// Факты о треугольнике №4. Стороны: 1, 2, 2
// Это равнобедренный треугольник!
```

## Добавление новых фигур

Главное, для создания новых фигур — интерфейс, специфичный для этой фигуры. Ниже приведен пример создания трапеции, или же многоугольника, на основе библиотеки.

Несмотря на однородность параметров, вполне можно описывать не только стороны, но и углы между ними, или количество вершин, поскольку изменение параметров опционально.

```typescript
// ПОЛНЫЙ ПРИМЕР В _EXAMPLE.ts

// Определяем интерфейс со всеми параметрами трапеции
interface trapezoid extends ShapeParams {
  // Основания
  base1: number; base2: number;
  // Боковые стороны
  side1: number; side2: number;
  // Угол между base1 и side1, и противополжный ему, между base2 и side2
  angle1: number; angle3: number;
}

class Trapezoid extends Shape<trapezoid> {
  constructor(
    public params: trapezoid,
    public isAbstractDimensionsAllowed: boolean = false
  ) {
    if (
      !isAbstractDimensionsAllowed &&
      // ... условия, при которых трапеции не может существовать
    ) {
      throw new Error("Invalid Trapezoid...");
    }

    super(params, isAbstractDimensionsAllowed);
  }

  // Геттеры angle1 и angle3 для прямого доступа к углам

  // Вычисляем не переданные в аргументах углы в геттерах
  // При необходимости, можем добавить проверку на существование трапеции

  get angle2(): number {
    return 180 - this.params.angle1;
  }

  // ...

  // Массив углов
  get angles(): number[] {
    return [this.angle1, this.angle2, this.angle3, this.angle4];
  }

  // ... Другие методы уникальные для трапеции

  // ... Статические методы для создания по сцецифичным парметрам
  //     например, равнобедренный или прямоугольный
}

const trpzd = new Trapezoid({ base1: 39, base2: 48, side1: 9, side2: 9, angle1: 60, angle3: 120 });

trpzd.on("sizeChange", () => {
  console.log("Углы трапеции: " + trpzd.angles.join(", "));
});

trpzd.resize({ angle1: 10, angle3: 10 });
// angle2: 170, angle4: 170
trpzd.resize({ angle1: 60, angle3: 23 });
// angle2: 120, angle4: 157
trpzd.resize({ angle1: 60, angle3: 120 });
// angle2: 120, angle4: 60

// ВЫВОД:
// Углы трапеции: 10, 170, 10, 170
// Углы трапеции: 60, 120, 23, 157
// Углы трапеции: 60, 120, 120, 60
```

Полный пример работы кода приведен в example.ts
